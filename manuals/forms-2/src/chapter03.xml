<?xml version="1.0"?>
<chapter xmlns="http://docbook.org/ns/docbook">
  <title>WORK PHASE</title>
  <para>
   The user defines the screen layouts (forms) to be used in a CIS or L/II COBOL
application by entering text at the keyboard to produce model forms on the
screen. The user may define as many forms as he wishes in a single FORMS-2 run.
To define one form requires at least two distinct Work Phases: one to
define the fixed text of the form, and another to define the variable data
entry fields.
</para>
  <para>
Most commonly the first Work Phase is used to specify the fixed text form
and the subsequent Work Phase to specify the variable data fields within the
form. However this need not always be the case and FORMS-2 needs to known
which type of text is to be input in a particular phase. Therefore the Work
Phase is introduced by a screen presenting the various options (W01).
</para>
  <section>
    <title>SCREEN W01</title>
    <section>
      <title>SCREEN TYPE SELECTION</title>
      <para>
      Fixed Text selections offered at this screen are as follows:
    </para>
      <variablelist>
        <varlistentry>
          <term>A</term>
          <listitem>
            <para>
      The CRT screen is cleared to spaces in preparation for the user to
enter the fixed text for a new form.
</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>B</term>
          <listitem>
            <para>
The previous screen is redisplayed to assist the user in defining
additional fixed text. Text from the previous screen is used only
as a background in this case, and is <emphasis>not</emphasis> included in the record
definition for the fixed text currently being keyed in. The user
must therefore ensure that if any part of the previous screen is
inadvertently overkeyed, the original characters must not be
replaced but cleared to spaces.
</para>
          </listitem>
        </varlistentry>
      </variablelist>
      <para>Variable Data selections offered at this screen are as follows:</para>
      <variablelist>
        <varlistentry>
          <term>C</term>
          <listitem>
            <para>
The previous screen is redisplayed to assist the user in the
redefinition of the form to incorporate variable data field
specifications. In the application the data is keyed into the
fixed text form itself.
</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>D</term>
          <listitem>
            <para>
The previous screen is redisplayed to assist the user in the
definition of variable data fields which will be kept separate
from the fixed text within the applications program. This may
sometimes be of assistence to the programmer even though it
results in larger application programs.
        </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section>
      <title>TERMINATING THE RUN</title>
      <para>
Screen W01 is redisplayed after completion of each Work Phase, and is the
screen used to terminate the program. This is done by entering the
character ! and pressing the RETURN key.
</para>
      <warning>
        <para>
Use of the ! command at any other time causes immediate abandonment of the run.
</para>
      </warning>
      <para>
On termination, the DDS file is closed and an identification message is
displayed. If the Check-out facility was specified during initialisation
then output of the Check-out program to disk is completed and the CHK file
is closed with an identification message displayed.
</para>
      <para>
Termination occurs automatically after the second Work Phase if an Index
program is being generated (see Chapter 8).
</para>
    </section>
  </section>
  <section>
    <title>WORK SCREEN</title>
    <indexterm>
      <primary>WORK SCREEN</primary>
    </indexterm>
    <para>
After the screen type has been selected, the user is presented with the
appropriate Work Screen for that text to be entered, i.e., if option A
(fixed text on clear screen) is selected, a blank screen is displayed. For
the other options, the previous screen is redisplayed to allow correct
alignment of the current input.
</para>
    <section>
      <title>BACKGROUND/FOREGROUND</title>
      <indexterm>
        <primary>BACKGROUND/FOREGROUND</primary>
      </indexterm>
      <para>
In order to process only the data entered in this phase, FORMS-2 must keep
this data separate from previously entered data which is displayed purely
for alignment purposes. FORMS-2 does this by constructing the displayed Work
Screen from two separate data areas, termed Background and Foreground. The
Foreground holds the data entered during the current Work Phase. The
Background holds previously entered data which has been retained for
alignment of the data entered in the current Work Phase. At the end of each
Work Phase FORMS-2 processes the Foreground data only.
</para>
      <para>
When screen W01 is next reached if options B, C D or are chosen, the
Foreground is overlayed on the current Background contents and then
Foreground is cleared to spaces. If option A is selected both Background
and Foreground are cleared to spaces.</para>
      <para>
In this way the new Work Screen is prepared automatically.
</para>
      <note>
        <para>
It is possible to override this automatic Work Screen preparation for
the next phase by means of a Work Screen command, described later, and
leave both areas unchanged.
</para>
      </note>
      <para>
Generally data is entered into the Foreground via the keyboard, and is moved
into the Background only from the Foreground. The F Work Screen command
described later provide facilities for further manipulation of these areas.
In particular it is possible to input a Screen Image file from a previous
run into the Foreground, thus enabling amendment of existing forms.
</para>
      <para>
During entry of data into the Work Screen (i.e. Foreground) two modes can be
invoked as follows:
</para>
      <variablelist>
        <varlistentry>
          <term>Edit Mode</term>
          <listitem>
            <para>
The mode in which the user keys data to create
the model form. The Initial mode is always
Edit Mode.
</para>
          </listitem>
        </varlistentry>
        <varlistentry>
          <term>Command Mode</term>
          <listitem>
            <para>
Commands are available to assist in the
creation of the edited Work Screen and in its processing.
        </para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
    <section>
      <title>EDIT MODE</title>
      <indexterm>
        <primary>EDIT MODE</primary>
      </indexterm>
      <para>
Edit Mode is identified to the user as the mode in which the cursor can be
freely moved to any part of the screen by use of the cursor control keys.
Entries may also be made into any part of the screen, in accordance with the
screen type selected at the start of this Work Phase.
</para>
      <section>
        <title>Fixed Text</title>
        <para>
In the design of the Fixed Text of a form (i.e. the fixed fields analagous
to the pre-printed text on a paper form) any legible characters can be
entered anywhere on the screen. This text will be displayed as "prompt"
text during a data entry run of the application.
</para>
      </section>
      <section>
        <title>Variable Data</title>
        <indexterm>
          <primary>Variable Data</primary>
        </indexterm>
        <para>
In the design of the Variable Data fields of a form (i.e. the fields
analagous to the entry spaces on a pre-printed form) the characters X, Y and
8, 9 can be entered.
</para>
        <para>
When variable data is being keyed in, X denotes an alphanumeric character
and 9 denotes a numeric character. If it is required to have two
alphanumeric fields contiguous with each other, Y's are placed in the
character positions of the second field. Similarly, for contiguous numeric
fields 8's are used.
</para>
<example>
          <para>
    INVOICE NO ......
  </para>
        </example>
        <para>
Suppose in an application the operator must key in an Invoice Number. Then
the fixed text in this example could be "INVOICE NO ......" One example
value of an invoice number could be "CA3021". It is necessary to define the
area and type of this variable data explicitly for the computer. Hence if
the. invoice number always had two alphanumerics followed by four numerics,
the user of FORMS-2 would key in XX9999 at the point on the screen (the dots
in this example) where he wishes the operator to key the actual invoice
number when the application Itself is running. (Note that CIS and L/II COBOL
provides an automatic validation of numeric fields).
</para>
        <para>
Additionally, special editing characters can be input to specify numeric
edited fields. Note that these fields should be separated by spaces. 
Numeric Edited Fields are described in the
<citetitle pubwork="book">CIS or L/II COBOL Language Reference Manual</citetitle>.
The valid characters are:-
</para>
        <simplelist type='inline'>
<member>Z</member>
<member>*</member>
<member>+</member>
<member>-</member>
<member>CR</member>
<member>DB</member>
<member>.(period)</member>
<member>,(comma)</member>
<member>B</member>
<member>/</member>
<member>0(zero)</member>
  <member>$</member>
</simplelist>
        <para>
The $ sign is the currency sign which may be replaced by another sign as
specified in the SPECIAL-NAMES clause of the COBOL program either
directly or as specified during the Initialisation Phase of the FORMS-2 run
(See Chapter 2).
</para>
        <note>
          <para>
The picture characters S, V, P are not allowed.
</para>
        </note>
<!--
        <para>
Variable data fields are checked for validity but only when a DDS file is
being created. The user should consult the
<citetitle pubwork="book">CIS COBOL Language Reference Manual</citetitle>
(ACCEPT/DISPLAY Verbs) for detail of how CIS COBOL screen handling works.
</para>
        -->
      </section>
    </section>
    <section>
      <title>COMMAND MODE</title>
      <para>
To switch to Command Mode from Edit Mode, the user simply presses the RETURN key.
</para>
      <para>
Command Mode is identified, to the user as the mode in which two underline
characters initially bound the cursor, and the cursor is constrained to stay
within these two characters.
</para>
      <para>
Commands are invoked by keying the command always followed by pressing the
RETURN key.
</para>
      <para>
When execution of a command is complete, all commands (except SPACE, ! and
Q) return to Edit Mode.
</para>
      <para>
The default command is the underline character (_) and this causes immediate
re-entry to Edit Mode.
</para>
      <section>
        <title>Commands</title>
        <para>
        The commands available to the user during the Work Phase fall into three
main groups. All commands are entered by typing the command character/s
followed by pressing the RETURN key.
</para>
        <orderedlist>
          <listitem>
            <para>
General Commands
</para>
            <para>
General commands perform such functions as releasing the Work Screen
for processing.
</para>
          </listitem>
          <listitem>
            <para>
Work Screen Manipulation Commands
</para>
            <para>
Work Screen Manipulation commands assist in the preparation and editing
of the Work Screen. It is recommended that all users become very
familiar with these commands.
</para>
          </listitem>
          <listitem>
            <para>
Programming Commands
</para>
            <para>
Programming commands have been introduced mainly for the convenience of
the COBOL programmer, and some of them will not be meaningful without
an understanding of COBOL. They include commands to assist in
producing efficient code, and to give more control over the files
output.
</para>
          </listitem>
        </orderedlist>
        <note>
          <para>
Groups 1 and 2 are summarised within HELP screens 1 and 2 (H01, H02)
Group 3 is summarised on HELP screens 3 and 4 (H03, H04) . See
Appendix C.
</para>
        </note>
        <section>
          <title>General Work Screen Commands</title>
          <indexterm>
            <primary>General Work Screen Commands</primary>
          </indexterm>
          <para>
A description of each general command is given below.
</para>
          <variablelist>
            <varlistentry>
              <term>?</term>
              <listitem>
                <para>
Display Help Screens
</para>
                <para>
Entry of the question mark then RETURN causes display of the
first HELP screen, which includes a summary of the General
Commands. This screen remains displayed until further input
is made.
</para>
                <para>
Keying RETURN alone at this stage returns to EDIT MODE.
</para>
                <para>
Keying ? then RETURN again causes display of the next HELP
screen, which is a summary of the Work Screen Manipulation
commands, and if repeated, each HELP screen in sequence until
the end of the series when the first screen Is displayed
again.
</para>
                <para>
The ? command is also available from the first (Select Text
Type) screen W01.
</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>?n</term>
              <listitem>
                <para>
Display Help Screen specified by n
        </para>
                <para>
The entry of ? followed by a numeric digit then RETURN
directly displays the nth screen in the HELP series.
        </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>&#160; (Space)</term>
              <listitem>
                <para>
Terminate the Work Phase
        </para>
                <para>
Entry of the space character terminates the current Work
Phase and Initiates processing of the data just entered in
that Work Screen.
        </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>_ (Underline)</term>
              <listitem>
                <para>
Return to Edit Mode
        </para>
                <para>
Entry of the underline character exits from Command Mode back
to Edit Mode.
        </para>
                <para>
All commands except SPACE, ! and Q return to Edit Mode.
The default command was introduced for convenience in case
Command Mode is entered inadvertently.
        </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>Q</term>
              <listitem>
                <para>
Quit
        </para>
                <para>
Entry of Q returns to Screen W01 (Select Type of Text).
        </para>
                <para>
Whatever text type is then selected, the current
Foreground/Background components of the Work Screen will be
unchanged on re-entry to Edit Mode.
        </para>
                <para>
The most likely use for this command is where the default
option C (variable data fields) is taken at screen W01 and
then the Work Screen is incorrectly used to set up a fixed
form. Validation errors then occur with automatic
re-entry to Edit Mode. To return to screen W01 and correct
the selection without loss of the text just entered, key
RETURN to enter Command Mode and enter the Q command. The
screen type can now be corrected and the Work Screen has been
preserved for reprocessing (as fixed text). The Q command is
also available at screen I02, and again its function is to
return a step within the phase (in this case back to screen
I01).
                  </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>!</term>
              <listitem>
                <para>
Terminate FORMS-2 run
        </para>
                <para>
Entry of the ! character causes termination of the program.
This command is available throughout the FORMS-2 program, but
is normally used on automatic return to screen W01 when a
work phase has been completed. When used elsewhere it
abandons the run.
        </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>X</term>
              <listitem>
                <para>
Reposition Command Area
        </para>
                <para>
The standard command area is in columns 1 and 2 of line 1 as
indicated by the two underline characters displayed on entry
to Command Mode. FORMS-2 always attempts to restore any data
in these positions upon return to Edit Mode. However to
enable these positions to be preserved intact at all times,
the facility to reposition the command area is provided. To
achieve this, the cursor is placed at the desired location
prior to Command Mode being entered. Entry of the character
X then causes the required change. The next time Command
Mode is entered the prompting underline characters will
appear at the new specified location.
        </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>*</term>
              <listitem>
                <para>
Define Key/Data split for Index Program
        </para>
                <para>
This command is particular to generation of the Index Program
and is described in Chapter 8. Note however, that if the
Index Program option G is taken at screen I02, at some stage
prior to termination of the second Work Phase the cursor
should be positioned at the first non-key variable data
position and the * command entered.
        </para>
                <para>
If this is not correctly done, FORMS-2 will continually return
to Edit Mode until it is.
        </para>
              </listitem>
            </varlistentry>
          </variablelist>
        </section>
        <section>
          <title>Work Screen Manipulation Commands</title>
          <indexterm>
            <primary>Work Screen Manipulation Commands</primary>
          </indexterm>
          <para>
The commands F and O are preparation commands.
</para>
          <variablelist>
            <varlistentry>
              <term>F</term>
              <listitem>
                <para>
Invoke Foreground/Background Menu Screen (W02).
        </para>
                <para>
Screen W02 contains options to assist in setting up the
Foreground component of the Work Screen. The concept of
Foreground and Background is described earlier in this
Chapter.
        </para>
                <para>
The options made available by the FORMS-2 W02 Screen
are:-
</para>
                <variablelist>
                  <varlistentry>
                    <term>A</term>
                    <listitem>
                      <para>Return to Edit Mode.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>B</term>
                    <listitem>
                      <para>Clear Foreground to spaces.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>C</term>
                    <listitem>
                      <para>Clear Background to spaces.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>D</term>
                    <listitem>
                      <para>Overlay Background data on to Foreground.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>E</term>
                    <listitem>
                      <para>Overlay Foreground data on to Background.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>F</term>
                    <listitem>
                      <para>Overlay a Screen Image file onto
Foreground. This option allows forms
defined in previous runs (and also
earlier in this run) to be amended. If
selected the user is prompted for the
identity of the required file.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>G</term>
                    <listitem>
                      <para>Overlay a Screen Image file onto Background.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>H</term>
                    <listitem>
                      <para>Show Foreground. This displays just the
Foreground component of the Work Screen
for examination. The full Work Screen
will be restored on return to Edit Mode.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>I</term>
                    <listitem>
                      <para>Show Background. This displays just the
Background component of the Work Screen
for examination. </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>J</term>
                    <listitem>
                      <para>Show a Screen Image file. The user is
prompted for the identity and the
specified file is displayed, but without
corrupting the current contents of either
Foreground or Background. This enables a
check to be made prior to using option D.</para>
                    </listitem>
                  </varlistentry>
                </variablelist>
                <note>
                  <para>
The options H, I and J cause a display which remains until RETURN is pressed. 
        </para>
                </note>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>F<replaceable>x</replaceable></term>
              <listitem>
                <para>
Specifies Required Foreground/Background Option
        </para>
                <para>
<replaceable>x</replaceable> is the option code as contained in screen WP02 above. The
specified option is executed and control returned to Edit
Mode without display of the WP02 screen.
        </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>O1</term>
              <listitem>
                <para>
"Switch Off" Automatic Background/Foreground Preparation.
        </para>
                <para>
The Background/Foreground preparation sequence is described
under BACKGROUND/FOREGROUND earlier in this Chapter. This
command is used to prevent the current Foreground being
merged into the Background or either area being cleared for
the next phase.
        </para>
                <para>
          The O1 command remains effective until the command 0
(described below) is entered.
</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>O or O0</term>
              <listitem>
                <para>
Reset Background/Foreground Preparation.
        </para>
                <para>
The Background/Foreground preparation sequence is reset to
automatic (starting at the beginning of the next Work Phase).
        </para>
                <note>
                  <para>
The Q command has a similar effect (beginning at the
next phase).
</para>
                </note>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
The commands C, D, I, K and A are editing commands and are controlled by the
position of the cursor at the time Command Mode is entered (i.e. the current
cursor position) and operate only on the Foreground data. Background data
remains on the same position.
</para>
          <variablelist>
            <varlistentry>
              <term>C<replaceable>n</replaceable></term>
              <listitem>
                <para>Insert Spaces</para>
                <para>Inserts <replaceable>n</replaceable> (1-9) spaces prior to the character at the current
cursor position. Only the current line is affected. </para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>D<replaceable>n</replaceable></term>
              <listitem>
                <para>Delete Characters</para>
                <para>Deletes <replaceable>n</replaceable> (1-9) characters including the character at the
current cursor position. Only the current line is affected.</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>I<replaceable>n</replaceable></term>
              <listitem>
                <para>Insert Blank Lines</para>
                <para>Inserts <replaceable>n</replaceable> (1-9) lines prior to the line containing the
current cursor position, irrespective of the column. Only
whole lines can be inserted.</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>K<replaceable>n</replaceable></term>
              <listitem>
                <para>Delete (Kill) Lines</para>
                <para>Deletes <replaceable>n</replaceable> (1-9) lines including the line containing the
current cursor position. Only whole lines can be deleted
using this command.</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>A<replaceable>n</replaceable></term>
              <listitem>
                <para>Repeat Current Line </para>
                <para>Repeats the line containing the current cursor position
<replaceable>n</replaceable> (1-9) times.</para>
                <note>
                  <para>
    This does not act as an insert. Any Foreground
    data in the next <replaceable>n</replaceable> lines will be overwritten.</para>
                </note>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
  Commands U and V are cursor positioning commands.
</para>
          <para>
  Horizontal cursor positioning can be achieved by means of the &#x2192; and &#x2190; keys.
</para>
          <para>
  Vertical cursor positioning is partially achieved by means of the &#x2193; and &#x2191;
keys, but the cursor is usually placed at column 1.
</para>
          <para>
  Vertical tabulation within the same column can be required when setting up a
form. Two "tabulation" commands are provided.
</para>
          <variablelist>
            <varlistentry>
              <term>U<replaceable>n</replaceable></term>
              <listitem>
                <para>Move Cursor Up </para>
                <para>Moves the cursor up <replaceable>n</replaceable> (1-9) lines from the current cursor
position. Cursor position within the line is maintained.</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>V<replaceable>n</replaceable></term>
              <listitem>
                <para>Move Cursor Down</para>
                <para>Moves the cursor down <replaceable>n</replaceable> (1-9) lines from the current cursor
position. Cursor position within the line is maintained.</para>
              </listitem>
            </varlistentry>
          </variablelist>
        </section>
        <section>
          <title>Programming Commands</title>
          <variablelist>
            <varlistentry>
              <term>G</term>
              <listitem>
                <para>The Dataname Structuring Command</para>
                <para>This command is not available if option G (for Index Program) is
specified at screen I02.</para>
                <para>The default recordname format generated by FORMS-2 for inclusion
in the user's COBOL source program for screen formatting is as
follows:</para>
                <screen>
  bbbbbb-rr (01 level)
</screen>
                <para>
  where: <replaceable>bbbbbb</replaceable> is the 1-6 character base specified at screen 101 
</para>
                <para>
  <replaceable>rr</replaceable> is the record number, starting at 00 in the first
Work Phase and increasing by one for each subsequent
Work Phase.
</para>
                <note>
                  <para>
If the window commands are used to define a window
starting in other than line 1 then the default
recordname generated will be:</para>
                  <screen>
  bbbbbb-rr-ll
</screen>
                  <para>
  where <replaceable>ll</replaceable> is the line number.
</para>
                </note>
                <para>
  The default elementary dataname structure generated by FORMS-2 for
inclusion in the COBOL source program for screen formatting is
as follows:
</para>
                <screen>
  bbbbbb-rr-nnnn
</screen>
                <para>
  where: <replaceable>nnnn</replaceable> is the sequence of this field within the screen,
starting at 0001.
</para>
                <para>
  Alternatively: 
</para>
                <para>
  The G (or G0) command causes <replaceable>nnnn</replaceable> within the dataname to be the
screen coordinates of the start of the field. This can sometimes
be of use to the programmer as a reference guide when using
COBOL facilities to set cursor position.
</para>
                <para>
  The G1 command restores the default dataname generation to using
sequential field numbers.
</para>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
The commands J and M are Multiple Spaces and FILLER Commands.
</para>
          <para>
The COBOL interactive ACCEPT and DISPLAY verbs operate only on named
fields; FILLER areas are left alone. The time taken to display a screen
depends both on the size and also the number of constituent fields.
</para>
          <para>
When processing fixed text screens, FORMS-2 by default generates FILLER
wherever multiple spaces appear. On some forms this can result in many
small fields separated by small FILLER fields. The problem may be
alleviated by:
</para>
          <variablelist>
            <varlistentry>
              <term>J<replaceable>n</replaceable></term>
              <listitem>
                <para>Reset Multiple Spaces</para>
                <para>The J<replaceable>n</replaceable> command resets the number of contiguous spaces FORMS-2 will
allow within the VALUE clause of a named field. This is initially
set to 1. </para>
                <para><replaceable>n</replaceable> may be 0 - 9</para>
                <note>
                  <para>J or J0 will force FILLER's even for single spaces.</para>
                </note>
              </listitem>
            </varlistentry>
          </variablelist>
          <para>
  An alternative method of forcing spaces within named fields is by use of the
underline which is designated for this purpose. Use of the underline
character in a field results in an actual space in the corresponding
position in the generated VALUE clause.
</para>
          <para>
If it is required to change the designated character from underline to
something else (presumably because there is a requirement to generate VALUE
"_"), the command M is used as follows: 
</para>
          <variablelist>
            <varlistentry>
              <term>M<replaceable>x</replaceable></term>
              <listitem>
                <para>Change Default "space" </para>
                <para>The M<replaceable>x</replaceable> command changes the default character (underline) to that specified by <replaceable>x</replaceable>.
</para>
                <note>
                  <para>If the space character ( ) itself is specified this will
force generation of named fields for the entire screen
without any FILLER's.</para>
                </note>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>S<replaceable>n</replaceable></term>
              <listitem>
                <para>File Output Control Command </para>
                <para>This command is not available if Option G (for Index Program)
is specified at screen I02. 
</para>
                <para>S (or S0) cancels any other S<replaceable>n</replaceable> commands in effect at the time.</para>
                <variablelist spacing="compact">
                  <varlistentry>
                    <term>S1</term>
                    <listitem>
                      <para>suppresses DDS (&amp; CHK) text generation for this Work
Screen. Generation of this text resumes for the next
Work Screen unless the same command is repeated in the
next phase.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>S2</term>
                    <listitem>
                      <para>suppresses Screen Image (S<replaceable>nn</replaceable>) text generation for this
Work Screen. Commonly used to suppress Screen Images of
just variable data fields. Again the effect only lasts
for the current phase.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>S3</term>
                    <listitem>
                      <para>results in the user being given the opportunity to
override the default Screen Image file identifier for
the current Work Screen. Normally if a file already
exists with the default identifier the user is given the
option of overriding it. If he rejects this option he
is prompted for an alternative file identifier. This
command forces the alternative file identifier to be
requested even when no file exists with the default
identifier.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>S9</term>
                    <listitem>
                      <para>causes FORMS-2 to halt after display of each line of
code during DDS generation. FORMS-2 re-ACCEPTs the line
before outputting it to the .DDS file. This provides
the programmer with a limited editing capability, which
may prove useful under special circumstances.
This facility is not available if option C or G (for
generated programs) is specified at screen I02.</para>
                    </listitem>
                  </varlistentry>
                </variablelist>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>P</term>
              <listitem>
                <para>Cursor Coordinate Command</para>
                <para>Causes the coordinates of the current cursor position to be
displayed at the command area position. This display lasts a
few seconds, after which the Work Screen contents at the
command area are restored and control is returned
automatically to EDIT MODE. Where sequential field numbers
are being used within datanames, this command provides an
easy alternative method of ascertaining the coordinates of
any field. 
</para>
              </listitem>
            </varlistentry>
            <varlistentry>
              <term>W<replaceable>n</replaceable></term>
              <listitem>
                <para>Window Commands</para>
                <para>These commands are not available if option G (for Index
Program) is specified at screen I02. 
</para>
                <para>The "window" defines the area (full lines) to be processed by
FORMS-2 when generating DDS text. By default the window is
the full screen. Where window start or end is other than
start or end of screen, a delimiting line of hyphens may
optionally be displayed on the line just outside the window.
e.g. if window starts in line 4, delimiters appear along the
length of line 3. </para>
                <para>The principal use of the window is to allow a form to be
created in situ, but save memory by avoiding the description
of blank lines at the top of the screen. </para>
                <note>
                  <para>Where window is used in this way the generated record
name incorporates the start line number of the window
which can then act as a guide to the programmer, using
the CIS or L/II COBOL ACCEPT/DISPLAY AT coordinates
facility. </para>
                </note>
                <para>The detailed commands give the user very comprehensive window
formatting capability as follows:</para>
                <variablelist spaceing="compact">
                  <varlistentry>
                    <term>W</term>
                    <listitem>
                      <para>(or W0) positions the cursor at current window start.
This is the equivalent of the HOM (\) key when the
window facility is in use. </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>W1</term>
                    <listitem>
                      <para>sets start of window to current line with delimiters on
previous line.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>W2</term>
                    <listitem>
                      <para>sets end of window at end of current line with
delimiters on next line.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>W3</term>
                    <listitem>
                      <para>sets start of window to current line without delimiters.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>W4</term>
                    <listitem>
                      <para>sets end of window at end of current line without
delimiters.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>W5</term>
                    <listitem>
                      <para>displays delimiters preceding current window start. </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>W6</term>
                    <listitem>
                      <para>displays delimiters following current window end. </para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>W7</term>
                    <listitem>
                      <para>erases start delimiters and restores any Work Screen
data to display.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>W8</term>
                    <listitem>
                      <para>erases end delimiters and restores any Work Screen data
to display.</para>
                    </listitem>
                  </varlistentry>
                  <varlistentry>
                    <term>W9</term>
                    <listitem>
                      <para>positions the cursor at current window end. </para>
                    </listitem>
                  </varlistentry>
                </variablelist>
              </listitem>
            </varlistentry>
          </variablelist>
          <note>
            <title>Notes</title>
            <orderedlist>
              <listitem>
                <para>
Delimiters do not corrupt Background/Foreground contents.
      </para>
              </listitem>
              <listitem>
                <para>
The output Screen Image will include the full Foreground part of
the Work Screen without delimiters, irrespective of whether
window has been defined. This could be used to include annotation
on the Screen Image which does not affect DDS generation.
      </para>
              </listitem>
              <listitem>
                <para>
A useful purpose for the window facility would be if a form is
required to be displayed in two stages: the first 10 lines then
the second 10 lines. This could be created as a single Screen
Image including both sections of the form, and the programmer
could 'window in' on the relevant portions as required when the
DDS text is generated.
      </para>
              </listitem>
            </orderedlist>
          </note>
        </section>
      </section>
    </section>
  </section>
  <section>
    <title>WORK PHASE COMPLETION</title>
    <para>
    To complete the Work Phase of FORMS-2, the user selects Command Mode, keys
the SPACE character and then the RETURN character. The SPACE character is
the command to release the Work Screen for processing.
</para>
    <para>
FORMS-2 completes the Work Phase (depending on the file selection at screen
I02) as follows:
</para>
    <orderedlist>
      <listitem>
        <para>
If this is a variable data field definition Work Phase (Option C or D
at screen W01), validation then occurs with the message:
      </para>
        <para>
WORK SCREEN VALIDATION in progress - DO NOT press RETURN
      </para>
      </listitem>
      <listitem>
        <para>
If DDS file generation is selected at screen I02, the source code
produced is echoed to the screen as it is written to disk. If the S9
command was specified processing stops after each line of code to
enable changes to be made as required. This is recommended only if
special requirements dictate its use.
      </para>
      </listitem>
      <listitem>
        <para>
If a screen image file was requested at screen I02, the screen image is
echoed to the screen as it is written to the disk file. The identity of
the created file is displayed and the user must press RETURN to
continue.
      </para>
      </listitem>
      <listitem>
        <para>
Screen W01 is redisplayed so that the run can be terminated or
continued.
      </para>
      </listitem>
    </orderedlist>
    <note>
      <title>Notes</title>
      <orderedlist>
        <listitem>
          <para>
        During validation of variable data only those characters listed in the
description of text-types are permitted (plus space). If any other
character is encountered, an error is notified by the validation
routine by alternately displaying "?" and the offending character to
give a flashing effect. This error indication then ceases and FORMS-2
returns to Edit Mode with the cursor positioned under the erroneous
character. The user must reissue the SPACE command after making any
corrections.
      </para>
        </listitem>
        
        <listitem>
          <para>
FORMS-2 will allow editing characters but will not verify that the combinations of
these are valid; COBOL editing rules must therefore be obeyed to
ensure error free code. Note that these fields should be separated by
spaces.
      </para>
        </listitem>
        <listitem>
          <para>
Only Foreground data is output to the Screen Image file.
      </para>
        </listitem>
      </orderedlist>
    </note>
  </section>
</chapter>
